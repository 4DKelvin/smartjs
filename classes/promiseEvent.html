<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>promiseEvent - SmartJs</title>
  
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
</head>
<body class="yui3-smart" _assetsPath="../assets">
 <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
               <a class="navbar-brand mainlogo" href="https://github.com/zhh77/smartjs">
             
            <img alt="SmartJs" src="../assets/css/logo.png" title="SmartJs">
            
                SmartJs
          </a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                 <ul class="nav navbar-nav">
                    
                    <li><a href="https://github.com/zhh77/smartjs">Home</a>
                    </li>
                    
                    <li><a href="http://zhh77.github.io/smartjs/">Document</a>
                    </li>
                    
                    <li><a href="http://www.cnblogs.com/zhh8077">Blog</a>
                    </li>
                    
                    <li><a href="https://github.com/zhh77/smartDoc">SmartDoc</a>
                    </li>
                    
                </ul>
               <div class="navbar-form navbar-right filterAPi" autocomplete="off">
                <input type="text" id='txtSearchAPI' class="form-control search-query" placeholder="Search for API" />
                 <ul id="filterList" class="filterItems dropdown-menu" role="menu"></ul>
                </div>
            </div>
        </div>
    </nav>
    <div id="sidebar">
    <h3>Modules/Classes</h3>
        <div id="api-tabview-filter">
            <input id='txtSearch' type="search" class="form-control" placeholder="Type to filter Modules/Classes">
        </div>
        <dl id="sidebar_list">
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/AOP.html">AOP</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/promiseEvent.html">promiseEvent</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/EventArg.html">EventArg</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/attachTrigger.html">attachTrigger</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/EventArg(trigger).html">EventArg(trigger)</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/flowController.html">flowController</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/EventArg(flowController).html">EventArg(flowController)</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/Base.html">Base</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/common.html">common</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/priorityList.html">priorityList</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/DataManager.html">DataManager</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/dataServices.html">dataServices</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/baseDataService.html">baseDataService</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/dataManager.html">dataManager</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/baseDataManager.html">baseDataManager</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/FilterBuilder.html">FilterBuilder</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/FilterBuilder.html">FilterBuilder</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Operations.html">Operations</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/OOP.html">OOP</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/klassBase.html">klassBase</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/klass.html">klass</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/factory.html">factory</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/Promise.html">Promise</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/Deferred.html">Deferred</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
        </dl>
</div>
   
    <div class="stdoc-content">
        <div class="apidocs">
            <div id="docs-main">
                <div class="content">
                    <div class="page-header">
    <h1>promiseEvent <small>Class</small></h1>
</div>
 <div class="well well-small sign-left3">
      <div class="stdoc-code"><p>基于事件和promise的回调管理，类似于jquery的callbacks，但具有结果传递，优先级，事件参数，promise控制等功能；
默认注册的事件都是按照优先级，依次执行，无论同步还是异步；但在非阻塞模式下，则事件不会等待上一个执行完毕（异步），
直接回依次执行，只是在最后的结果中会等待所有的事件执行完毕之后才返回</p>
</div>
 </div>

<div class="well well-small sign-left2 container-fluid" id="classesItems">
    <div class="row">
    
        <div class="index-section methods col-sm-4">
            <h3>Methods</h3>
            
            <ul class="index-list methods">
                
                    <li class="index-item method">
                        <a href="#" data-tabid="#method" data-anchor="#method_add" data-tablink="add">add</a>

                        
                        
                    </li>
                
                    <li class="index-item method">
                        <a href="#" data-tabid="#method" data-anchor="#method_clear" data-tablink="clear">clear</a>

                        
                        
                    </li>
                
                    <li class="index-item method">
                        <a href="#" data-tabid="#method" data-anchor="#method_fire" data-tablink="fire">fire</a>

                        
                        
                    </li>
                
                    <li class="index-item method">
                        <a href="#" data-tabid="#method" data-anchor="#method_fireWith" data-tablink="fireWith">fireWith</a>

                        
                        
                    </li>
                
                    <li class="index-item method">
                        <a href="#" data-tabid="#method" data-anchor="#method_has" data-tablink="has">has</a>

                        
                        
                    </li>
                
                    <li class="index-item method">
                        <a href="#" data-tabid="#method" data-anchor="#method_len" data-tablink="len">len</a>

                        
                        
                    </li>
                
                    <li class="index-item method">
                        <a href="#" data-tabid="#method" data-anchor="#method_remove" data-tablink="remove">remove</a>

                        
                        
                    </li>
                
            </ul>
            
        </div>
    
        <div class="index-section properties col-sm-4">
            <h3>Properties</h3>
            
        </div>
    
        <div class="index-section events col-sm-4">
            <h3>Events</h3>
            
        </div>
    </div>
</div>

<div>
    <ul id="itemTab" class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#class">Detail</a></li>
        
            <li><a data-toggle="tab" href="#method">Methods</a></li>
        
        
        
    </ul>

    <div class="tab-content">
        <div id="class" class="tab-pane active">
            <div class="well well-small classDetail sign-left1">
            

            

            
                <div class="foundat">
                    Defined in: <a href="../files/src_base_aop.js.html#l67"><code>src\base\aop.js:67</code></a>
                </div>
            

            
                
                    Module: <a href="../modules/AOP.html">AOP</a>
                
            

            
        </div>

        
            
                <div class="constructor">
                    <h2>Constructor</h2>
                    <div id="method_promiseEvent" class="method item">
    <h3 class="name">promiseEvent</h3>
    <code>
    promiseEvent
    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        [mode]
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    
    </code>

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/src_base_aop.js.html#l67"><code>src\base\aop.js:67</code></a>
        
        </p>


        

        
    </div>

    <div class="description well well-small sign-left3">
        
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <table class="table table-bordered">
            <tr class='active'><th>name</th><th>type</th><th>flag</th><th>description</th></tr>
            
                <tr class="param">
                    
                    <td>
                        <code class="param-name optional">[mode]</code></td>
                    <td><span class="type">String</span></td>
                    <td><span class="flag optional" title="This parameter is optional.">optional</span>
                    

                    
                    </td>
                    <td><div class="param-description">
                        <p>promiseEvent的模式，可以混用；</p>
<pre><code>1. 默认；event模式，所有的注册的事件，执行时，第一个事件参数为e（详细说明见promiseEvent-EventArg）
2. &#39;callback&#39; : 回调模式; 与event模式对立，执行时不会添加事件参数e
2. &#39;once&#39; : 全部事件执行一次，即有执行动作就销毁
3. &#39;noBlock&#39; : 非阻塞模式；</code></pre>

                    </div>

                    
                </tr>
            
            </table>
        </div>
    

    

    
        <div class="example">
            <h4>Example:</h4>
            <ul class="nav nav-tabs example-list">
                
                <li role="presentation"  class="active"  _no='0'> <a>基础</a></li>
                
                <li role="presentation"   _no='1'> <a>once模式</a></li>
                
                <li role="presentation"   _no='2'> <a>callback模式</a></li>
                
                <li role="presentation"   _no='3'> <a>promise示例</a></li>
                
                <li role="presentation"   _no='4'> <a>非阻塞模式</a></li>
                
                <li role="presentation"   _no='5'> <a>结果传递</a></li>
                
            </ul>

            <div class="example-content ">
                <div class="stdoc-code"><pre class="code prettyprint"><code>            //标准模式
            var events = st.promiseEvent(),
                result = [];

            //注册事件
            events.add(&#39;call1&#39;, function(e, text) {
                result.push(&#39;call1&#39;);
            });

            //自定义priority注册事件
            events.add(&#39;call2&#39;, function(e, text) {
                result.push(&#39;call2&#39;);
            },100);

            //单once模式注册
            events.add(&#39;call3&#39;, function(e, text) {
                result.push(&#39;call3&#39;);
            },&#39;once&#39;);

            //所有设置
            events.add(&#39;call4&#39;, function(e, text) {
                result.push(&#39;call4&#39;);
            },50,&#39;once&#39;);

            //返回promise
            events.add("promiseCall", function(e, text) {
                //异步的方法
                setTimeout(function() {
                    result.push(&#39;promiseCall&#39;);
                    e.resolve();
                },0);
                return e.promise();
            },20);

            //回调中如果存在promise需要,st.when来获取结果
            st.when(events.fire(&#39;test&#39;)).done(function(){
                expect(result.join(&#39;-&#39;)).toBe(&#39;call2-call4-promiseCall-call1-call3&#39;);

            });</code></pre>
</div><div class="stdoc-code"><pre class="code prettyprint"><code>            //已once模式创建事件管理
            var onceCalls = st.promiseEvent("once"),
                result = [];

            onceCalls.add("c1", function {
                result.push("c1");
            });
            //执行之后即销毁
            onceCalls.fire
            expect(onceCalls.has(&#39;c1&#39;)).toBe(false);</code></pre>
</div><div class="stdoc-code"><pre class="code prettyprint"><code>            var result = [],obj2 = st.attachTrigger({
                test: function(name) {
                    result.push(name);
                }
            }, "callback");

            obj2.onBefore("test", "addBefore", function(name) {
                result.push(&#39;before-&#39; + name);
            }).on("test", "addAfter", function(name) {
                result.push(&#39;after-&#39; + name)
            });
            obj2.test(&#39;bind&#39;);
            expect(result.join(&#39;,&#39;)).toBe("before-bind,bind,after-bind");</code></pre>
</div><div class="stdoc-code"><pre class="code prettyprint"><code>            var pCalls = st.promiseEvent(),
                result = [];

            pCalls.add("c1", function(e, name) {
                //延迟100ms
                setTimeout(function() {
                    //完成promise,并返回结果
                    e.resolve(name + &#39;,resolve!&#39;);
                }, 100);

                //返回promise
                return e.promise();
            });

            //使用when来监控promiseEvent的执行，使用done来处理执行完毕的方法
            $.when(pCalls.fire("call")).done(function(data) {
                expect(data).toBe(&#39;call,resolve!&#39;);

            });</code></pre>
</div><div class="stdoc-code"><pre class="code prettyprint"><code>            //创建一个noBlock模式的promiseEvents;
            var noBlockCalls = st.promiseEvent("noBlock"),
                result = [];

            //第一个回调延迟100
            noBlockCalls.add("c1", function(e) {
                setTimeout(function() {
                    result.push(&#39;c1&#39;);
                    e.resolve();
                }, 100);
                return e.promise();
            });

            //第二个正常执行
            noBlockCalls.add("c2", function(e) {
                result.push(&#39;c2&#39;);
            });

            //第三个回调延迟50
            noBlockCalls.add("c3", function(e) {
                setTimeout(function() {
                    result.push(&#39;c3&#39;);
                    e.resolve();
                }, 50);
                return e.promise();
            });

            $.when(noBlockCalls.fire()).done(function(data) {
                //最终执行顺序是c2-c3-c1
                expect(result + &#39;&#39;).toBe(&#39;c2,c3,c1&#39;);

            });</code></pre>
</div><div class="stdoc-code"><pre class="code prettyprint"><code>            var resultCalls = st.promiseEvent
            resultCalls.add("c1", function(e) {
                return "c1";
            }).add("c2", function(e) {
                return e.result + ",c2";
            });
            expect(resultCalls.fire).toBe(&#39;c1,c2&#39;);</code></pre>
</div>
            </div>

             <button class="btn btn-info btn-viewDemo" type="button">view demo</button>
            <button class="btn btn-info btn-editDemo" type="button">edit code</button>
        </div>
    
</div>

                </div>
            
        </div>

        
            <div id="method" class="tab-pane">
                <h2 class="off-left">Methods</h2>

                
                    <div id="method_add" class="method item">
    <h3 class="name">add</h3>
    <code>
    add
    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        name
                    
                </li>
            
                <li class="arg">
                    
                        fn
                    
                </li>
            
                <li class="arg">
                    
                        [priority=0]
                    
                </li>
            
                <li class="arg">
                    
                        [mode]
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    
    </code>

    

    

    

    

    

    
        <span class="flag chainable">chainable</span>
    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/src_base_aop.js.html#l114"><code>src\base\aop.js:114</code></a>
        
        </p>


        

        
    </div>

    <div class="description well well-small sign-left3">
        <div class="stdoc-code"><p>添加事件回调方法</p>
</div>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <table class="table table-bordered">
            <tr class='active'><th>name</th><th>type</th><th>flag</th><th>description</th></tr>
            
                <tr class="param">
                    
                       <td> <code class="param-name">name</code>
                       <td> <span class="type">String</span>
                       <td>
                    

                    
                    </td>
                    <td><div class="param-description">
                        <p>事件回调名</p>

                    </div>

                    
                </tr>
            
                <tr class="param">
                    
                       <td> <code class="param-name">fn</code>
                       <td> <span class="type">String</span>
                       <td>
                    

                    
                    </td>
                    <td><div class="param-description">
                        <p>事件回调方法</p>

                    </div>

                    
                </tr>
            
                <tr class="param">
                    
                    <td>
                        <code class="param-name optional">[priority=0]</code></td>
                    <td><span class="type">Number</span></td>
                    <td><span class="flag optional" title="This parameter is optional.">optional</span>
                    

                    
                    </td>
                    <td><div class="param-description">
                        <p>权重;预设为0，可以通过配置调整</p>

                    </div>

                    
                </tr>
            
                <tr class="param">
                    
                    <td>
                        <code class="param-name optional">[mode]</code></td>
                    <td><span class="type">String</span></td>
                    <td><span class="flag optional" title="This parameter is optional.">optional</span>
                    

                    
                    </td>
                    <td><div class="param-description">
                        <p>回调模式："once":执行一次</p>

                    </div>

                    
                </tr>
            
            </table>
        </div>
    

    

    
        <div class="example">
            <h4>Example:</h4>
            <ul class="nav nav-tabs example-list">
                
                <li role="presentation"  class="active"  _no='0'> <a>aop</a></li>
                
            </ul>

            <div class="example-content ">
                <div class="stdoc-code"><pre class="code prettyprint"><code>            //标准模式
            var events = st.promiseEvent(),
                result = [];

            //注册事件
            events.add(&#39;call1&#39;, function(e, text) {
                result.push(&#39;call1&#39;);
            });

            //自定义priority注册事件
            events.add(&#39;call2&#39;, function(e, text) {
                result.push(&#39;call2&#39;);
            },100);

            //单once模式注册
            events.add(&#39;call3&#39;, function(e, text) {
                result.push(&#39;call3&#39;);
            },&#39;once&#39;);

            //所有设置
            events.add(&#39;call4&#39;, function(e, text) {
                result.push(&#39;call4&#39;);
            },50,&#39;once&#39;);

            //返回promise
            events.add("promiseCall", function(e, text) {
                //异步的方法
                setTimeout(function() {
                    result.push(&#39;promiseCall&#39;);
                    e.resolve();
                },0);
                return e.promise();
            },20);

            //回调中如果存在promise需要,st.when来获取结果
            st.when(events.fire(&#39;test&#39;)).done(function(){
                expect(result.join(&#39;-&#39;)).toBe(&#39;call2-call4-promiseCall-call1-call3&#39;);

            });</code></pre>
</div>
            </div>

             <button class="btn btn-info btn-viewDemo" type="button">view demo</button>
            <button class="btn btn-info btn-editDemo" type="button">edit code</button>
        </div>
    
</div>

                
                    <div id="method_clear" class="method item">
    <h3 class="name">clear</h3>
    <code>
    clear
    
        <span class="paren">()</span>
    
    </code>

    

    

    

    

    

    
        <span class="flag chainable">chainable</span>
    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/src_base_aop.js.html#l103"><code>src\base\aop.js:103</code></a>
        
        </p>


        

        
    </div>

    <div class="description well well-small sign-left3">
        <div class="stdoc-code"><p>清空所有事件回调</p>
</div>
    </div>

    

    

    
        <div class="example">
            <h4>Example:</h4>
            <ul class="nav nav-tabs example-list">
                
                <li role="presentation"  class="active"  _no='0'> <a>aop</a></li>
                
            </ul>

            <div class="example-content ">
                <div class="stdoc-code"><pre class="code prettyprint"><code>            var events = st.promiseEvent

            //添加回调
            events.add(&#39;call1&#39;, function(e, text) {});
            events.add(&#39;call2&#39;, function(e, text) {});

            //回调事件总数为2
            expect(events.len).toBe(2);

            //清除events下面注册的事件
            events.clear();

            //回调事件总数为0
            expect(events.len()).toBe(0);</code></pre>
</div>
            </div>

             <button class="btn btn-info btn-viewDemo" type="button">view demo</button>
            <button class="btn btn-info btn-editDemo" type="button">edit code</button>
        </div>
    
</div>

                
                    <div id="method_fire" class="method item">
    <h3 class="name">fire</h3>
    <code>
    fire
    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        args
                    
                </li>
            
                <li class="arg">
                    
                        [argHandle]
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    
    </code>

    
        <span class="returns-inline">
            <span class="type">Object</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/src_base_aop.js.html#l320"><code>src\base\aop.js:320</code></a>
        
        </p>


        

        
    </div>

    <div class="description well well-small sign-left3">
        <div class="stdoc-code"><p>执行回调</p>
</div>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <table class="table table-bordered">
            <tr class='active'><th>name</th><th>type</th><th>flag</th><th>description</th></tr>
            
                <tr class="param">
                    
                       <td> <code class="param-name">args</code>
                       <td> <span class="type">Array</span>
                       <td>
                    

                    
                    </td>
                    <td><div class="param-description">
                        <p>执行参数</p>

                    </div>

                    
                </tr>
            
                <tr class="param">
                    
                    <td>
                        <code class="param-name optional">[argHandle]</code></td>
                    <td><span class="type">Function</span></td>
                    <td><span class="flag optional" title="This parameter is optional.">optional</span>
                    

                    
                    </td>
                    <td><div class="param-description">
                        <p>参数处理方法，可以对eventarg进行修改；例如：argHandle(e)</p>

                    </div>

                    
                </tr>
            
            </table>
        </div>
    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        [<span class="type">Object</span>]
                    
                    <p>返回执行结果</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_fireWith" class="method item">
    <h3 class="name">fireWith</h3>
    <code>
    fireWith
    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        context
                    
                </li>
            
                <li class="arg">
                    
                        args
                    
                </li>
            
                <li class="arg">
                    
                        [argHandle]
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    
    </code>

    
        <span class="returns-inline">
            <span class="type">Object | Promise</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/src_base_aop.js.html#l156"><code>src\base\aop.js:156</code></a>
        
        </p>


        

        
    </div>

    <div class="description well well-small sign-left3">
        <div class="stdoc-code"><p>根据上下文对象执行回调;fire方法的增强</p>
</div>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <table class="table table-bordered">
            <tr class='active'><th>name</th><th>type</th><th>flag</th><th>description</th></tr>
            
                <tr class="param">
                    
                       <td> <code class="param-name">context</code>
                       <td> <span class="type">Object</span>
                       <td>
                    

                    
                    </td>
                    <td><div class="param-description">
                        <p>上下文对象</p>

                    </div>

                    
                </tr>
            
                <tr class="param">
                    
                       <td> <code class="param-name">args</code>
                       <td> <span class="type">Array</span>
                       <td>
                    

                    
                    </td>
                    <td><div class="param-description">
                        <p>执行参数</p>

                    </div>

                    
                </tr>
            
                <tr class="param">
                    
                    <td>
                        <code class="param-name optional">[argHandle]</code></td>
                    <td><span class="type">Function</span></td>
                    <td><span class="flag optional" title="This parameter is optional.">optional</span>
                    

                    
                    </td>
                    <td><div class="param-description">
                        <p>参数处理方法，可以对eventarg进行修改；例如：argHandle(e)</p>

                    </div>

                    
                </tr>
            
            </table>
        </div>
    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        [<span class="type">Object | Promise</span>]
                    
                    <p>返回执行结果</p>

                
            </div>
        </div>
    

    
        <div class="example">
            <h4>Example:</h4>
            <ul class="nav nav-tabs example-list">
                
                <li role="presentation"  class="active"  _no='0'> <a>aop</a></li>
                
            </ul>

            <div class="example-content ">
                <div class="stdoc-code"><pre class="code prettyprint"><code>            var events = st.promiseEvent,
                target = {
                    name: &#39;target&#39;
                };

            //注册事件
            events.add(&#39;call1&#39;, function(e, text) {
                return this.name + &#39;-&#39; + text + &#39;-&#39; + e.extend
            });

            //使用fireWith执行
            var result = events.fireWith(target, [&#39;test&#39;], function(e) {
                //扩展事件参数；只会在这一次的fire中生效
                e.extend = function() {
                    return &#39;extend&#39;;
                }
            })

            expect(result).toBe(&#39;target-test-extend&#39;);</code></pre>
</div>
            </div>

             <button class="btn btn-info btn-viewDemo" type="button">view demo</button>
            <button class="btn btn-info btn-editDemo" type="button">edit code</button>
        </div>
    
</div>

                
                    <div id="method_has" class="method item">
    <h3 class="name">has</h3>
    <code>
    has
    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        name
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    
    </code>

    
        <span class="returns-inline">
            <span class="type">Boolean</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/src_base_aop.js.html#l287"><code>src\base\aop.js:287</code></a>
        
        </p>


        

        
    </div>

    <div class="description well well-small sign-left3">
        <div class="stdoc-code"><p>判断是否存在事件回调</p>
</div>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <table class="table table-bordered">
            <tr class='active'><th>name</th><th>type</th><th>flag</th><th>description</th></tr>
            
                <tr class="param">
                    
                       <td> <code class="param-name">name</code>
                       <td> <span class="type">String</span>
                       <td>
                    

                    
                    </td>
                    <td><div class="param-description">
                        <p>事件回调名</p>

                    </div>

                    
                </tr>
            
            </table>
        </div>
    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        [<span class="type">Boolean</span>]
                    
                    <p>是否存在</p>

                
            </div>
        </div>
    

    
        <div class="example">
            <h4>Example:</h4>
            <ul class="nav nav-tabs example-list">
                
                <li role="presentation"  class="active"  _no='0'> <a>aop</a></li>
                
            </ul>

            <div class="example-content ">
                <div class="stdoc-code"><pre class="code prettyprint"><code>            var calls = st.promiseEvent

            calls.add("call1", function(e) {});

            //判断是否注册了"call1"的event
            expect(calls.has("call1")).toBeTruthy;</code></pre>
</div>
            </div>

             <button class="btn btn-info btn-viewDemo" type="button">view demo</button>
            <button class="btn btn-info btn-editDemo" type="button">edit code</button>
        </div>
    
</div>

                
                    <div id="method_len" class="method item">
    <h3 class="name">len</h3>
    <code>
    len
    
        <span class="paren">()</span>
    
    </code>

    
        <span class="returns-inline">
            <span class="type">Number</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/src_base_aop.js.html#l311"><code>src\base\aop.js:311</code></a>
        
        </p>


        

        
    </div>

    <div class="description well well-small sign-left3">
        <div class="stdoc-code"><p>获取注册的事件长度/数</p>
</div>
    </div>

    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        [<span class="type">Number</span>]
                    
                    <p>注册的事件长度/数</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_remove" class="method item">
    <h3 class="name">remove</h3>
    <code>
    remove
    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        name
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    
    </code>

    

    

    

    

    

    
        <span class="flag chainable">chainable</span>
    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/src_base_aop.js.html#l142"><code>src\base\aop.js:142</code></a>
        
        </p>


        

        
    </div>

    <div class="description well well-small sign-left3">
        <div class="stdoc-code"><p>删除事件回调方法</p>
</div>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <table class="table table-bordered">
            <tr class='active'><th>name</th><th>type</th><th>flag</th><th>description</th></tr>
            
                <tr class="param">
                    
                       <td> <code class="param-name">name</code>
                       <td> <span class="type">String</span>
                       <td>
                    

                    
                    </td>
                    <td><div class="param-description">
                        <p>事件回调名</p>

                    </div>

                    
                </tr>
            
            </table>
        </div>
    

    

    
        <div class="example">
            <h4>Example:</h4>
            <ul class="nav nav-tabs example-list">
                
                <li role="presentation"  class="active"  _no='0'> <a>aop</a></li>
                
            </ul>

            <div class="example-content ">
                <div class="stdoc-code"><pre class="code prettyprint"><code>            var events = st.promiseEvent

            //注册事件
            events.add(&#39;call1&#39;, function(e, text) {});

            //删除事件
            events.remove(&#39;call1&#39;);

            expect(events.len).toBe(0);</code></pre>
</div>
            </div>

             <button class="btn btn-info btn-viewDemo" type="button">view demo</button>
            <button class="btn btn-info btn-editDemo" type="button">edit code</button>
        </div>
    
</div>

                
            </div>
        

        

        
    </div>
</div>

                </div>
            </div>
        </div>
    </div>
<a id="gotoTop" class='well well-small' href='#'>
    Top
</a>
<script src="../assets/vendor/jquery/jquery-1.8.2.min.js"></script>
<script src="../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script src="../assets/js/config.js"></script>
<script src="../assets/js/doc.js"></script>
</body>
</html>
