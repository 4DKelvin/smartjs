<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>EventArg(trigger) - SmartJs</title>
  
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
</head>
<body class="yui3-smart" _assetsPath="../assets">
 <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
               <a class="navbar-brand mainlogo" href="https://github.com/zhh77/smartjs">
             
            <img alt="SmartJs" src="../assets/css/logo.png" title="SmartJs">
            
                SmartJs
          </a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                 <ul class="nav navbar-nav">
                    
                    <li><a href="https://github.com/zhh77/smartjs">Home</a>
                    </li>
                    
                    <li><a href="http://zhh77.github.io/smartjs/">Document</a>
                    </li>
                    
                    <li><a href="http://www.cnblogs.com/zhh8077">Blog</a>
                    </li>
                    
                    <li><a href="https://github.com/zhh77/smartDoc">SmartDoc</a>
                    </li>
                    
                </ul>
               <div class="navbar-form navbar-right filterAPi" autocomplete="off">
                <input type="text" id='txtSearchAPI' class="form-control search-query" placeholder="Search for API" />
                 <ul id="filterList" class="filterItems dropdown-menu" role="menu"></ul>
                </div>
            </div>
        </div>
    </nav>
    <div id="sidebar">
    <h3>Modules/Classes</h3>
        <div id="api-tabview-filter">
            <input id='txtSearch' type="search" class="form-control" placeholder="Type to filter Modules/Classes">
        </div>
        <dl id="sidebar_list">
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/AOP.html">AOP</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/promiseEvent.html">promiseEvent</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/EventArg.html">EventArg</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/attachTrigger.html">attachTrigger</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/EventArg(trigger).html">EventArg(trigger)</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/flowController.html">flowController</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/EventArg(flowController).html">EventArg(flowController)</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/Base.html">Base</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/common.html">common</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/priorityList.html">priorityList</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/DataManager.html">DataManager</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/dataServices.html">dataServices</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/baseDataService.html">baseDataService</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/dataManager.html">dataManager</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/baseDataManager.html">baseDataManager</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/FilterBuilder.html">FilterBuilder</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/FilterBuilder.html">FilterBuilder</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Operations.html">Operations</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/OOP.html">OOP</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/klassBase.html">klassBase</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/klass.html">klass</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/factory.html">factory</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/Promise.html">Promise</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/Deferred.html">Deferred</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
        </dl>
</div>
   
    <div class="stdoc-content">
        <div class="apidocs">
            <div id="docs-main">
                <div class="content">
                    <div class="page-header">
    <h1>EventArg(trigger) <small>Class</small></h1>
</div>
 <div class="well well-small sign-left3">
      <div class="stdoc-code"><p>trigger下的事件参数，由EventArg扩展而来</p>
</div>
 </div>

<div class="well well-small sign-left2 container-fluid" id="classesItems">
    <div class="row">
    
        <div class="index-section methods col-sm-4">
            <h3>Methods</h3>
            
            <ul class="index-list methods extends">
                
                    <li class="index-item method">
                        <a href="#" data-tabid="#method" data-anchor="#method_preventDefault" data-tablink="preventDefault">preventDefault</a>

                        
                        
                    </li>
                
                    <li class="index-item method inherited">
                        <a href="#" data-tabid="#method" data-anchor="#method_reject" data-tablink="reject">reject</a>

                        
                        
                    </li>
                
                    <li class="index-item method inherited">
                        <a href="#" data-tabid="#method" data-anchor="#method_remove" data-tablink="remove">remove</a>

                        
                        
                    </li>
                
                    <li class="index-item method inherited">
                        <a href="#" data-tabid="#method" data-anchor="#method_resolve" data-tablink="resolve">resolve</a>

                        
                        
                    </li>
                
                    <li class="index-item method">
                        <a href="#" data-tabid="#method" data-anchor="#method_stop" data-tablink="stop">stop</a>

                        
                        
                    </li>
                
                    <li class="index-item method inherited">
                        <a href="#" data-tabid="#method" data-anchor="#method_stopPropagation" data-tablink="stopPropagation">stopPropagation</a>

                        
                        
                    </li>
                
            </ul>
            
        </div>
    
        <div class="index-section properties col-sm-4">
            <h3>Properties</h3>
            
        </div>
    
        <div class="index-section events col-sm-4">
            <h3>Events</h3>
            
        </div>
    </div>
</div>

<div>
    <ul id="itemTab" class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#class">Detail</a></li>
        
            <li><a data-toggle="tab" href="#method">Methods</a></li>
        
        
        
    </ul>

    <div class="tab-content">
        <div id="class" class="tab-pane active">
            <div class="well well-small classDetail sign-left1">
            

            
                <div class="extends">
                    Extends <a href="..\classes\EventArg.html" class="crosslink">EventArg</a>
                </div>
            

            
                <div class="foundat">
                    Defined in: <a href="../files/src_base_aop.js.html#l517"><code>src\base\aop.js:517</code></a>
                </div>
            

            
                
                    Module: <a href="../modules/AOP.html">AOP</a>
                
            

            
        </div>

        
            
        </div>

        
            <div id="method" class="tab-pane">
                <h2 class="off-left">Methods</h2>

                
                    <div id="method_preventDefault" class="method item">
    <h3 class="name">preventDefault</h3>
    <code>
    preventDefault
    
        <span class="paren">()</span>
    
    </code>

    

    

    

    

    

    
        <span class="flag chainable">chainable</span>
    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/src_base_aop.js.html#l522"><code>src\base\aop.js:522</code></a>
        
        </p>


        

        
    </div>

    <div class="description well well-small sign-left3">
        <div class="stdoc-code"><p>阻止默认的方法执行；</p>
</div>
    </div>

    

    

    
        <div class="example">
            <h4>Example:</h4>
            <ul class="nav nav-tabs example-list">
                
                <li role="presentation"  class="active"  _no='0'> <a>aop</a></li>
                
                <li role="presentation"   _no='1'> <a>aop</a></li>
                
            </ul>

            <div class="example-content ">
                <div class="stdoc-code"><pre class="code prettyprint"><code>            var result = [],obj = st.attachTrigger({
                test: function(name) {
                    result.push(name);
                }
            });

            obj.onBefore(&#39;test&#39;, &#39;testBefore&#39;, function(e, name) {
                result.push(name + &#39;-before1&#39;);
                //阻止前置后续的事件&amp;阻止默认方法
                e.preventDefault
            })

            obj.onBefore(&#39;test&#39;, &#39;testBefore2&#39;, function(e, name) {
                result.push(name + &#39;-before2&#39;);
            })

            obj.on(&#39;test&#39;, &#39;testAfter&#39;, function(e, name) {
                result.push(name + &#39;-after&#39;);
            })

            obj.test(&#39;call&#39;);
            expect(result.join(&#39;,&#39;)).toBe(&#39;call-before1,call-before2,call-after&#39;);</code></pre>
</div><div class="stdoc-code"><pre class="code prettyprint"><code>            var result = [],obj = st.attachTrigger({
                test: function(name) {
                    result.push(name);
                }
            });

            obj.onBefore(&#39;test&#39;, &#39;testBefore&#39;, function(e, name) {
                result.push(name + &#39;-before1&#39;);
                //阻止前置后续的事件&amp;阻止默认方法
                e.stopPropagation.preventDefault
            })

            obj.onBefore(&#39;test&#39;, &#39;testAfter&#39;, function(e, name) {
                result.push(name + &#39;-before2&#39;);
            })

            obj.on(&#39;test&#39;, &#39;testBefore2&#39;, function(e, name) {
                result.push(name + &#39;-after&#39;);
            })

            obj.test(&#39;call&#39;);
            //最终输出前置call-before1和后置
            expect(result.join(&#39;,&#39;)).toBe(&#39;call-before1,call-after&#39;);</code></pre>
</div>
            </div>

             <button class="btn btn-info btn-viewDemo" type="button">view demo</button>
            <button class="btn btn-info btn-editDemo" type="button">edit code</button>
        </div>
    
</div>

                
                    <div id="method_reject" class="method item inherited">
    <h3 class="name">reject</h3>
    <code>
    reject
    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        err
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    
    </code>

    

    

    

    

    

    

    

    <div class="meta">
        
            
                <p>Inherited from
                <a href="..\classes\EventArg.html#method_reject">EventArg</a>:
            
        
        
        <a href="../files/src_base_aop.js.html#l207"><code>src\base\aop.js:207</code></a>
        
        </p>


        

        
    </div>

    <div class="description well well-small sign-left3">
        <div class="stdoc-code"><p>拒绝契约，在任何一个事件中reject都会停止所有后续promiseEvent的执行</p>
</div>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <table class="table table-bordered">
            <tr class='active'><th>name</th><th>type</th><th>flag</th><th>description</th></tr>
            
                <tr class="param">
                    
                       <td> <code class="param-name">err</code>
                       <td> <span class="type">Object</span>
                       <td>
                    

                    
                    </td>
                    <td><div class="param-description">
                        <p>拒绝参数</p>

                    </div>

                    
                </tr>
            
            </table>
        </div>
    

    

    
        <div class="example">
            <h4>Example:</h4>
            <ul class="nav nav-tabs example-list">
                
                <li role="presentation"  class="active"  _no='0'> <a>aop</a></li>
                
            </ul>

            <div class="example-content ">
                <div class="stdoc-code"><div class="stdoc-code"><pre class="code prettyprint"><code>            var pCalls = st.promiseEvent(),
                result = [];

            pCalls.add("c1", function(e, name) {
                //延迟100ms
                setTimeout(function() {
                    //拒绝promise,并返回结果
                    e.reject(name + &#39;,reject!&#39;);
                }, 100);

                //返回promise
                return e.promise();
            });

            //使用when来监控promiseEvent的执行，使用fail捕获reject
            $.when(pCalls.fire("call")).fail(function(data) {
                expect(data).toBe(&#39;call,reject!&#39;);

            });</code></pre>
</div></div>
            </div>

             <button class="btn btn-info btn-viewDemo" type="button">view demo</button>
            <button class="btn btn-info btn-editDemo" type="button">edit code</button>
        </div>
    
</div>

                
                    <div id="method_remove" class="method item inherited">
    <h3 class="name">remove</h3>
    <code>
    remove
    
        <span class="paren">()</span>
    
    </code>

    

    

    

    

    

    
        <span class="flag chainable">chainable</span>
    

    

    <div class="meta">
        
            
                <p>Inherited from
                <a href="..\classes\EventArg.html#method_remove">EventArg</a>:
            
        
        
        <a href="../files/src_base_aop.js.html#l216"><code>src\base\aop.js:216</code></a>
        
        </p>


        

        
    </div>

    <div class="description well well-small sign-left3">
        <div class="stdoc-code"><p>删除当前事件；与promiseEvent.add的&#39;once&#39;模式，不同在于可以手动进行控制</p>
</div>
    </div>

    

    

    
        <div class="example">
            <h4>Example:</h4>
            <ul class="nav nav-tabs example-list">
                
                <li role="presentation"  class="active"  _no='0'> <a>aop</a></li>
                
            </ul>

            <div class="example-content ">
                <div class="stdoc-code"><div class="stdoc-code"><pre class="code prettyprint"><code>            var calls = st.promiseEvent,
                result = [];

            calls.add("onceTest", function(e) {
                //删除"onceTest"这个事件；
                e.remove
            });
            //执行后才会触发删除
            calls.fire();

            //"onceTest"已经不在calls中
            expect(calls.has("onceTest")).toBe(false);</code></pre>
</div></div>
            </div>

             <button class="btn btn-info btn-viewDemo" type="button">view demo</button>
            <button class="btn btn-info btn-editDemo" type="button">edit code</button>
        </div>
    
</div>

                
                    <div id="method_resolve" class="method item inherited">
    <h3 class="name">resolve</h3>
    <code>
    resolve
    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        [result]
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    
    </code>

    

    

    

    

    

    

    

    <div class="meta">
        
            
                <p>Inherited from
                <a href="..\classes\EventArg.html#method_resolve">EventArg</a>:
            
        
        
        <a href="../files/src_base_aop.js.html#l194"><code>src\base\aop.js:194</code></a>
        
        </p>


        

        
    </div>

    <div class="description well well-small sign-left3">
        <div class="stdoc-code"><p>完成契约</p>
</div>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <table class="table table-bordered">
            <tr class='active'><th>name</th><th>type</th><th>flag</th><th>description</th></tr>
            
                <tr class="param">
                    
                    <td>
                        <code class="param-name optional">[result]</code></td>
                    <td><span class="type">Object</span></td>
                    <td><span class="flag optional" title="This parameter is optional.">optional</span>
                    

                    
                    </td>
                    <td><div class="param-description">
                        <p>返回结果</p>

                    </div>

                    
                </tr>
            
            </table>
        </div>
    

    

    
        <div class="example">
            <h4>Example:</h4>
            <ul class="nav nav-tabs example-list">
                
                <li role="presentation"  class="active"  _no='0'> <a>aop</a></li>
                
                <li role="presentation"   _no='1'> <a>aop</a></li>
                
                <li role="presentation"   _no='2'> <a>aop</a></li>
                
            </ul>

            <div class="example-content ">
                <div class="stdoc-code"><div class="stdoc-code"><pre class="code prettyprint"><code>            var result = [],obj = st.attachTrigger({
                test: function(name) {
                    result.push(name);
                }
            });

            obj.onBefore(&#39;test&#39;, &#39;testBefore&#39;, function(e, name) {
                setTimeout(function() {
                    result.push(name + &#39;-before1&#39;);
                    e.resolve();
                }, 100);
                return e.promise();
            })

            obj.onBefore(&#39;test&#39;, &#39;testBefore2&#39;, function(e, name) {
                result.push(name + &#39;-before2&#39;);
            })

            obj.on(&#39;test&#39;, &#39;testBefore2&#39;, function(e, name) {
                setTimeout(function() {
                    result.push(name + &#39;-after&#39;);
                    e.resolve();
                }, 100);
                return e.promise();
            })

            $.when(obj.test(&#39;call&#39;)).done(function() {
                expect(result.join(&#39;,&#39;)).toBe(&#39;call-before1,call-before2,call,call-after&#39;);

            })</code></pre>
</div><div class="stdoc-code"><pre class="code prettyprint"><code>            var pCalls = st.promiseEvent(),
                result = [];

            pCalls.add("c1", function(e, name) {
                setTimeout(function() {
                    e.resolve(name + &#39;-c1&#39;);
                }, 100);
                return e.promise();
            });

            pCalls.add("c2", function(e, name) {
                return e.result + &#39;-c2&#39;;
            });

            pCalls.add("c3", function(e, name) {
                setTimeout(function() {
                    e.resolve(e.result + &#39;-c3&#39;);
                }, 100);
                return e.promise();
            });

            $.when(pCalls.fire("call")).done(function(data) {
                expect(data).toBe(&#39;call-c1-c2-c3&#39;);

            });</code></pre>
</div><div class="stdoc-code"><pre class="code prettyprint"><code>            var noBlockCalls2 = st.promiseEvent(),
                result = [];
            //第一个回调延迟100
            noBlockCalls2.add("c1", function(e) {
                setTimeout(function() {
                    result.push(&#39;c1&#39;);
                    e.resolve();
                }, 100);
                //在返回promise的时候，指定noBlock模式
                return e.promise("noBlock");
            });
            //第二个正常执行
            noBlockCalls2.add("c2", function(e) {
                result.push(&#39;c2&#39;);
            });
            //第三个回调延迟100
            noBlockCalls2.add("c3", function(e) {
                setTimeout(function() {
                    result.push(&#39;c3&#39;);
                    e.resolve();
                }, 100);
                return e.promise();
            });

            $.when(noBlockCalls2.fire()).done(function(data) {
                //最终执行顺序是c2-c1-c3
                expect(result + &#39;&#39;).toBe(&#39;c2,c1,c3&#39;);

            });</code></pre>
</div></div>
            </div>

             <button class="btn btn-info btn-viewDemo" type="button">view demo</button>
            <button class="btn btn-info btn-editDemo" type="button">edit code</button>
        </div>
    
</div>

                
                    <div id="method_stop" class="method item">
    <h3 class="name">stop</h3>
    <code>
    stop
    
        <span class="paren">()</span>
    
    </code>

    

    

    

    

    

    
        <span class="flag chainable">chainable</span>
    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/src_base_aop.js.html#l534"><code>src\base\aop.js:534</code></a>
        
        </p>


        

        
    </div>

    <div class="description well well-small sign-left3">
        <div class="stdoc-code"><p>停止当前方法执行和后置所有事件；在属性监听时，则阻止赋值；</p>
</div>
    </div>

    

    

    
        <div class="example">
            <h4>Example:</h4>
            <ul class="nav nav-tabs example-list">
                
                <li role="presentation"  class="active"  _no='0'> <a>aop</a></li>
                
            </ul>

            <div class="example-content ">
                <div class="stdoc-code"><pre class="code prettyprint"><code>            var result = [],obj = st.attachTrigger({
                test: function(name) {
                    result.push(name);
                }
            });

            obj.onBefore(&#39;test&#39;, &#39;testBefore&#39;, function(e, name) {
                result.push(name + &#39;-before1&#39;);
                //停止执行
                e.stop
            })

            obj.onBefore(&#39;test&#39;, &#39;testBefore2&#39;, function(e, name) {
                result.push(name + &#39;-before2&#39;);
            })

            obj.on(&#39;test&#39;, &#39;testAfter&#39;, function(e, name) {
                result.push(name + &#39;-after&#39;);
            })

            obj.test(&#39;call&#39;);
            //最终只输入前置call-before1
            expect(result.join(&#39;,&#39;)).toBe(&#39;call-before1&#39;);</code></pre>
</div>
            </div>

             <button class="btn btn-info btn-viewDemo" type="button">view demo</button>
            <button class="btn btn-info btn-editDemo" type="button">edit code</button>
        </div>
    
</div>

                
                    <div id="method_stopPropagation" class="method item inherited">
    <h3 class="name">stopPropagation</h3>
    <code>
    stopPropagation
    
        <span class="paren">()</span>
    
    </code>

    

    

    

    

    

    
        <span class="flag chainable">chainable</span>
    

    

    <div class="meta">
        
            
                <p>Inherited from
                <a href="..\classes\EventArg.html#method_stopPropagation">EventArg</a>:
            
        
        
        <a href="../files/src_base_aop.js.html#l184"><code>src\base\aop.js:184</code></a>
        
        </p>


        

        
    </div>

    <div class="description well well-small sign-left3">
        <div class="stdoc-code"><p>停止所有后续事件执行</p>
</div>
    </div>

    

    

    
        <div class="example">
            <h4>Example:</h4>
            <ul class="nav nav-tabs example-list">
                
                <li role="presentation"  class="active"  _no='0'> <a>aop</a></li>
                
            </ul>

            <div class="example-content ">
                <div class="stdoc-code"><div class="stdoc-code"><pre class="code prettyprint"><code>            var calls = st.promiseEvent,
                result = [];

            calls.add("c1", function(e) {
                //停止执行
                e.stopPropagation
            }).add("c2", function() {
                result.push("c2");
            });
            calls.fire();
            expect(result.length).toBe(0);</code></pre>
</div></div>
            </div>

             <button class="btn btn-info btn-viewDemo" type="button">view demo</button>
            <button class="btn btn-info btn-editDemo" type="button">edit code</button>
        </div>
    
</div>

                
            </div>
        

        

        
    </div>
</div>

                </div>
            </div>
        </div>
    </div>
<a id="gotoTop" class='well well-small' href='#'>
    Top
</a>
<script src="../assets/vendor/jquery/jquery-1.8.2.min.js"></script>
<script src="../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script src="../assets/js/config.js"></script>
<script src="../assets/js/doc.js"></script>
</body>
</html>
